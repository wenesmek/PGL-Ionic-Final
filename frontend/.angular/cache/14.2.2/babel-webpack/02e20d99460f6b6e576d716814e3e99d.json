{"ast":null,"code":"import _asyncToGenerator from \"/home/zining/Data/Proyectos/Ionic/UT1-pgl/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./login.page.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./login.page.scss?ngResource\";\nimport { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AlertController } from '@ionic/angular';\nimport { AuthService } from '../auth.service';\nlet LoginPage = class LoginPage {\n  constructor(router, authService, alertController) {\n    this.router = router;\n    this.authService = authService;\n    this.alertController = alertController;\n  }\n\n  ngOnInit() {}\n\n  login(form) {\n    const user = {\n      id: null,\n      username: form.value.email,\n      password: form.value.password,\n      name: null,\n      isAdmin: null\n    };\n    this.authService.login(user).subscribe(res => {\n      if (!res.access_token) {\n        this.presentAlert('invalid credentials');\n        return;\n      }\n\n      this.router.navigateByUrl('/you-are-logged-in');\n      form.reset();\n    }, err => {\n      this.presentAlert('Error');\n    });\n  }\n\n  presentAlert(message) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const alert = yield _this.alertController.create({\n        cssClass: 'my-custom-class',\n        header: 'Error',\n        subHeader: message,\n        message: 'Could not login. Try again.',\n        buttons: ['OK']\n      });\n      yield alert.present();\n    })();\n  }\n\n};\n\nLoginPage.ctorParameters = () => [{\n  type: Router\n}, {\n  type: AuthService\n}, {\n  type: AlertController\n}];\n\nLoginPage = __decorate([Component({\n  selector: 'app-login',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], LoginPage);\nexport { LoginPage };","map":{"version":3,"mappings":";;;;AAAA,SAASA,SAAT,QAAkC,eAAlC;AACA,SAASC,MAAT,QAAuB,iBAAvB;AACA,SAASC,eAAT,QAAgC,gBAAhC;AAEA,SAASC,WAAT,QAA4B,iBAA5B;IAQaC,SAAS,SAATA,SAAS;EAEpBC,YACUC,MADV,EAEUC,WAFV,EAGUC,eAHV,EAG0C;IAFhC;IACA;IACA;EAAqC;;EAE/CC,QAAQ,IACP;;EAEDC,KAAK,CAACC,IAAD,EAAK;IACR,MAAMC,IAAI,GAAS;MACjBC,EAAE,EAAE,IADa;MAEjBC,QAAQ,EAAEH,IAAI,CAACI,KAAL,CAAWC,KAFJ;MAGjBC,QAAQ,EAAEN,IAAI,CAACI,KAAL,CAAWE,QAHJ;MAIjBC,IAAI,EAAE,IAJW;MAKjBC,OAAO,EAAE;IALQ,CAAnB;IAOA,KAAKZ,WAAL,CAAiBG,KAAjB,CAAuBE,IAAvB,EAA6BQ,SAA7B,CAAwCC,GAAD,IAAO;MAC5C,IAAG,CAACA,GAAG,CAACC,YAAR,EAAsB;QACpB,KAAKC,YAAL,CAAkB,qBAAlB;QACA;MACD;;MACD,KAAKjB,MAAL,CAAYkB,aAAZ,CAA0B,oBAA1B;MACAb,IAAI,CAACc,KAAL;IACD,CAPD,EAOGC,GAAG,IAAG;MACP,KAAKH,YAAL,CAAkB,OAAlB;IACD,CATD;EAUD;;EAEKA,YAAY,CAACI,OAAD,EAAgB;IAAA;;IAAA;MAChC,MAAMC,KAAK,SAAS,KAAI,CAACpB,eAAL,CAAqBqB,MAArB,CAA4B;QAC9CC,QAAQ,EAAE,iBADoC;QAE9CC,MAAM,EAAE,OAFsC;QAG9CC,SAAS,EAAEL,OAHmC;QAI9CA,OAAO,EAAE,6BAJqC;QAK9CM,OAAO,EAAE,CAAC,IAAD;MALqC,CAA5B,CAApB;MAQA,MAAML,KAAK,CAACM,OAAN,EAAN;IATgC;EAUjC;;AAxCmB;;;;;;;;;;AAAT9B,SAAS,eALrBJ,SAAS,CAAC;EACTmC,QAAQ,EAAE,WADD;EAETC,8BAFS;;AAAA,CAAD,CAKY,GAAThC,SAAS,CAAT;SAAAA","names":["Component","Router","AlertController","AuthService","LoginPage","constructor","router","authService","alertController","ngOnInit","login","form","user","id","username","value","email","password","name","isAdmin","subscribe","res","access_token","presentAlert","navigateByUrl","reset","err","message","alert","create","cssClass","header","subHeader","buttons","present","selector","template"],"sourceRoot":"","sources":["/home/zining/Data/Proyectos/Ionic/UT1-pgl/frontend/src/app/auth/login/login.page.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AlertController } from '@ionic/angular';\nimport { YouAreLoggedInPageRoutingModule } from 'src/app/you-are-logged-in/you-are-logged-in-routing.module';\nimport { AuthService } from '../auth.service';\nimport { User } from '../user';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n\n  constructor(\n    private router: Router,\n    private authService: AuthService,\n    private alertController: AlertController) { }\n\n  ngOnInit() {\n  }\n\n  login(form){\n    const user: User = {\n      id: null,\n      username: form.value.email,\n      password: form.value.password,\n      name: null,\n      isAdmin: null\n    };\n    this.authService.login(user).subscribe((res)=>{\n      if(!res.access_token) {\n        this.presentAlert('invalid credentials');\n        return;\n      }\n      this.router.navigateByUrl('/you-are-logged-in');\n      form.reset();\n    }, err => {\n      this.presentAlert('Error');\n    });\n  }\n\n  async presentAlert(message: string) {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'Error',\n      subHeader: message,\n      message: 'Could not login. Try again.',\n      buttons: ['OK']\n    });\n\n    await alert.present();\n  }\n}\n"]},"metadata":{},"sourceType":"module"}