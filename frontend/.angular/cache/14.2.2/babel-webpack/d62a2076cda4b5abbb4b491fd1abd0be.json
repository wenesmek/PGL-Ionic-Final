{"ast":null,"code":"import _asyncToGenerator from \"/home/zining/Data/Proyectos/Ionic/UT1-pgl/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./juegues-nia-form.page.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./juegues-nia-form.page.scss?ngResource\";\nimport { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { JugueteService } from '../services/juguete.service';\nimport { PhotoService } from '../services/photo.service';\nlet JueguesNiaFormPage = class JueguesNiaFormPage {\n  constructor(activeRoute, jugueteService, router, photoService) {\n    this.activeRoute = activeRoute;\n    this.jugueteService = jugueteService;\n    this.router = router;\n    this.photoService = photoService;\n    this.id = null;\n    this.capturedPhoto = '';\n    this.juguete = {\n      id: null,\n      nombre: '',\n      descripcion: '',\n      filename: ''\n    };\n  }\n\n  ngOnInit() {\n    this.activeRoute.params.subscribe(params => {\n      this.id = params.id;\n\n      if (this.id !== '0') {\n        this.getJuguete();\n      }\n    });\n  }\n\n  takePhoto() {\n    this.photoService.takePhoto().then(data => {\n      this.capturedPhoto = data.webPath;\n    });\n  }\n\n  pickImage() {\n    this.photoService.pickImage().then(data => {\n      this.capturedPhoto = data.webPath;\n    });\n  }\n\n  discardImage() {\n    this.capturedPhoto = null;\n  }\n\n  getJuguete() {\n    this.jugueteService.getJuguete(this.id).subscribe(response => {\n      this.juguete = response;\n      this.id = this.juguete.id;\n      this.capturedPhoto = 'http://localhost:8080/images/' + this.juguete.filename;\n    });\n  }\n\n  updateJuguete() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let blob = null;\n\n      if (_this.capturedPhoto !== 'http://localhost:8080/images/' + _this.juguete.filename) {\n        const response = yield fetch(_this.capturedPhoto);\n        blob = yield response.blob();\n      }\n\n      _this.jugueteService.updateJuguete(_this.juguete.id, _this.juguete, blob).subscribe(response => {\n        _this.getJuguete();\n      });\n    })();\n  }\n\n  deleteJuguete() {\n    this.jugueteService.deleteJuguete(this.id).subscribe(response => {\n      this.router.navigateByUrl('/juguetes-nia');\n    });\n  }\n\n  createJuguete() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let blob = null;\n\n      if (_this2.capturedPhoto !== '') {\n        const response = yield fetch(_this2.capturedPhoto);\n        blob = yield response.blob();\n      }\n\n      _this2.jugueteService.createJuguete({\n        nombre: _this2.juguete.nombre,\n        descripcion: _this2.juguete.descripcion\n      }, blob).subscribe(response => {\n        _this2.router.navigateByUrl('/juguetes-nia');\n      });\n    })();\n  }\n\n};\n\nJueguesNiaFormPage.ctorParameters = () => [{\n  type: ActivatedRoute\n}, {\n  type: JugueteService\n}, {\n  type: Router\n}, {\n  type: PhotoService\n}];\n\nJueguesNiaFormPage = __decorate([Component({\n  selector: 'app-juegues-nia-form',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], JueguesNiaFormPage);\nexport { JueguesNiaFormPage };","map":{"version":3,"mappings":"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","names":["Component","ActivatedRoute","Router","JugueteService","PhotoService","JueguesNiaFormPage","constructor","activeRoute","jugueteService","router","photoService","id","nombre","descripcion","filename","ngOnInit","params","subscribe","getJuguete","takePhoto","then","data","capturedPhoto","webPath","pickImage","discardImage","response","juguete","updateJuguete","blob","fetch","deleteJuguete","navigateByUrl","createJuguete","selector","template"],"sourceRoot":"","sources":["/home/zining/Data/Proyectos/Ionic/UT1-pgl/frontend/src/app/juegues-nia-form/juegues-nia-form.page.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router';\n\nimport {JugueteService} from '../services/juguete.service';\nimport {PhotoService} from '../services/photo.service';\n\n@Component({\n  selector: 'app-juegues-nia-form',\n  templateUrl: './juegues-nia-form.page.html',\n  styleUrls: ['./juegues-nia-form.page.scss'],\n})\nexport class JueguesNiaFormPage implements OnInit {\n\n  id: any = null;\n  capturedPhoto = '';\n\n  juguete: any = {\n    id: null,\n    nombre: '',\n    descripcion: '',\n    filename: '',\n  };\n\n  constructor(\n    private activeRoute: ActivatedRoute,\n    private jugueteService: JugueteService,\n    private router: Router,\n    private photoService: PhotoService\n  ) { }\n  ngOnInit() {\n    this.activeRoute.params.subscribe(params => {\n      this.id = params.id;\n\n      if (this.id !== '0'){\n        this.getJuguete();\n      }\n\n    });\n  }\n\n  takePhoto() {\n    this.photoService.takePhoto().then(data => {\n      this.capturedPhoto = data.webPath;\n    });\n  }\n\n  pickImage() {\n    this.photoService.pickImage().then(data => {\n      this.capturedPhoto = data.webPath;\n    });\n  }\n\n  discardImage() {\n    this.capturedPhoto = null;\n  }\n\n\n  getJuguete(){\n    this.jugueteService.getJuguete(this.id).subscribe(response =>{\n      this.juguete = response;\n      this.id = this.juguete.id;\n      this.capturedPhoto = 'http://localhost:8080/images/' + this.juguete.filename;\n\n    });\n  }\n\n  async updateJuguete(){\n    let blob = null;\n    if (this.capturedPhoto !== 'http://localhost:8080/images/' + this.juguete.filename){\n      const response = await fetch(this.capturedPhoto);\n      blob = await response.blob();\n    }\n    this.jugueteService.updateJuguete(this.juguete.id, this.juguete, blob).subscribe(response =>{\n      this.getJuguete();\n    });\n  }\n\n  deleteJuguete(){\n    this.jugueteService.deleteJuguete(this.id).subscribe(response =>{\n      this.router.navigateByUrl('/juguetes-nia');\n    });\n  }\n  async createJuguete(){\n    let blob = null;\n    if (this.capturedPhoto !== ''){\n      const response = await fetch(this.capturedPhoto);\n      blob = await response.blob();\n    }\n    this.jugueteService.createJuguete(\n      {\n        nombre: this.juguete.nombre,\n        descripcion: this.juguete.descripcion\n      }, blob).subscribe(response =>{\n\n      this.router.navigateByUrl('/juguetes-nia');\n    });\n\n\n  }\n}\n"]},"metadata":{},"sourceType":"module"}